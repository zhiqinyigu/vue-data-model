!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("vue")):"function"==typeof define&&define.amd?define(["vue"],e):"object"==typeof exports?exports.VDM=e(require("vue")):t.VDM=e(t.Vue)}(self,(function(t){return function(){"use strict";var e={982:function(e){e.exports=t}},n={};function r(t){var o=n[t];if(void 0!==o)return o.exports;var i=n[t]={exports:{}};return e[t](i,i.exports,r),i.exports}r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,{a:e}),e},r.d=function(t,e){for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var o={};return function(){function t(t){return Array.prototype.slice.call(t)}function e(t){return""+t}function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Illegal state";return new Error("[vue-data-model] "+t)}function i(t){console.error(t)}r.r(o),r.d(o,{BaseType:function(){return ut},ComplexType:function(){return ct},SimpleType:function(){return at},baseMixns:function(){return At},createStateModel:function(){return Tt},fail:function(){return n},getComposeRawMaterial:function(){return Vt},getIdentifier:function(){return j},getParent:function(){return S},getTreeNode:function(){return _},isScalarNode:function(){return w},isTreeNodeValue:function(){return O},logError:function(){return i},normalizeIdentifier:function(){return e},toArray:function(){return t},toJSON:function(){return g},types:function(){return ke}});var u=r(982),c=r.n(u),a="_$$actualValueForProxySet$$_";function f(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function l(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var s=1,p=function(){function t(e,n,r,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),l(this,"state",0),l(this,"storedValue",void 0),this._id=s++,this.type=e,this.environment=o,this.setParent(n,r),this.state=1}var e,n;return e=t,(n=[{key:"isAlive",get:function(){return 0!==this.state}},{key:"root",get:function(){var t=this.parent;return t?t.root:this}},{key:"value",get:function(){return this.type.getValue(this)}},{key:"setParent",value:function(t,e){this.parent=t,this.subpath=e}},{key:"_destroy",value:function(){this.state=0}}])&&f(e.prototype,n),t}();function y(t){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function h(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function b(t,e){return(b=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function d(t,e){return!e||"object"!==y(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function v(t){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var m=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&b(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=v(r);if(o){var n=v(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return d(this,t)});function u(t,e,n,r,o){var c;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(c=i.call(this,t,e,n,o))._initialSnapshot=r,c.storedValue=c.type.createNewInstance(c._initialSnapshot),c}return e=u,(n=[{key:"snapshot",get:function(){return this.type.getSnapshot(this)}}])&&h(e.prototype,n),u}(p);function g(){return _(this).snapshot}function O(t){return t&&t.$treenode}function w(t){return t instanceof m}function _(t){return t.$treenode}function j(t){return _(t).identifier}function S(t,e){for(var r=_(t),o=e=e||1;r;){if(0==e--)return r.storedValue;r=r.parent}throw n("Failed to find the parent of ".concat(JSON.stringify(t.$toValue?t.$toValue():t)," at depth ").concat(o))}function P(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function R(t){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function k(t){return t&&"object"===R(t)&&a in t}function C(t){return t instanceof c()}function A(t){return C(t)?T(t):function(t){return JSON.parse(JSON.stringify(t))}(t)}function T(t,e){return JSON.parse(JSON.stringify(function(t){var e={},n=_(t).getChildNodes();return t.$options._each((function(r){var o,i=t[r];if(r in n){var u=n[r];o=w(u)?u.snapshot:i.$toValue()}else o=i;e[r]=o})),e}(t),e))}function N(t){return Object.assign.apply(Object,(e=(t.mixins||[]).map(N),function(t){if(Array.isArray(t))return P(t)}(e)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(e)||function(t,e){if(t){if("string"==typeof t)return P(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?P(t,e):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).concat([t.data?t.data.call(null):{}]));var e}function E(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function I(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?E(Object(n),!0).forEach((function(e){x(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function x(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function V(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var M=0,D=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.cacheId=M++,this.cache=new Map,this.lastCacheModificationPerId=new(c())({data:{sett:{}}})}var e,r;return e=t,(r=[{key:"updateLastCacheModificationPerId",value:function(t){var e=this.lastCacheModificationPerId.sett[t];this.lastCacheModificationPerId.sett=I(I({},this.lastCacheModificationPerId.sett),{},x({},t,void 0===e?1:e+1))}},{key:"getLastCacheModificationPerId",value:function(t){var e=this.lastCacheModificationPerId.sett[t]||0;return"".concat(this.cacheId,"-").concat(e)}},{key:"addNodeToCache",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(t.identifierAttribute){var r=t.identifier;if(!r)return;this.cache.has(r)||this.cache.set(r,[]);var o=this.cache.get(r);if(-1!==o.indexOf(t))throw n("Already registered");o.push(t),e&&this.updateLastCacheModificationPerId(r)}}},{key:"removeNodeToCache",value:function(t){if(t.identifierAttribute){var e=t.identifier,n=this.cache.get(e);if(n){var r=n.indexOf(t);-1!==r&&(n.splice(r,1),this.updateLastCacheModificationPerId(e))}}}},{key:"has",value:function(t,e){var n=this.cache.get(e);return!!n&&n.some((function(e){return t.isAssignableFrom(e.type)}))}},{key:"resolve",value:function(t,e){var r=this.cache.get(e);if(!r)return null;var o=r.filter((function(e){return t.isAssignableFrom(e.type)}));switch(o.length){case 0:return null;case 1:return o[0];default:throw n("Cannot resolve a reference to type '".concat(t.name,"' with id: '").concat(e,"' unambigously, there are multiple candidates: ").concat(o.map((function(t){return t.path})).join(", ")))}}}])&&V(e.prototype,r),t}();function B(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var $=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.cache=new Map}var e,r;return e=t,(r=[{key:"addRef",value:function(t,e){if(e){this.cache.has(e)||this.cache.set(e,[]);var r=this.cache.get(e);if(-1!==r.indexOf(t))throw n("Already registered");r.push(t)}}},{key:"removeRefs",value:function(t,e,n){var r=this.cache.get(e);if(r){var o=r.indexOf(t);-1!==o&&(r.splice(o,1),n&&this.updateRefs(e))}}},{key:"updateRefs",value:function(t){var e=this.cache.get(t);e&&e.forEach((function(t){return t.value}))}}])&&B(e.prototype,r),t}();function F(t){return(F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function z(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function J(t,e,n){return(J="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=G(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function L(t,e){return(L=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function U(t,e){return!e||"object"!==F(e)&&"function"!=typeof e?q(t):e}function q(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function G(t){return(G=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var H=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&L(t,e)}(f,t);var r,o,i,u,a=(i=f,u=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=G(i);if(u){var n=G(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return U(this,t)});function f(t,r,o,i,u){var l;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f);var s=q(l=a.call(this,t,r,o,u));l._childNodes={},l._initialSnapshot=i,l.vm=new(c())({computed:{snapshot:function(){return t.getSnapshot(s)}}}),r||(l.identifierCache=new D,l.referenceCache=new $);var p=function(t){s.storedValue=t,t.$treenode||(t.$treenode=s,t.$toValue=g)};if(p(t.createNewInstance(l._initialSnapshot,p)),l.identifierAttribute=t.identifierAttribute,l.identifier=null,l.unnormalizedIdentifier=null,l.identifierAttribute&&l._initialSnapshot){var y=l._initialSnapshot[l.identifierAttribute];if(void 0===y&&(y=l.storedValue[l.identifierAttribute]),"string"!=typeof y&&"number"!=typeof y)throw n("Instance identifier '".concat(l.identifierAttribute,"' for type '").concat(l.type.name,"' must be a string or a number"));l.identifier=e(y),l.unnormalizedIdentifier=y}return l.root.identifierCache.addNodeToCache(q(l)),l.root.referenceCache.updateRefs(l.identifier),l}return r=f,(o=[{key:"replaceChildNode",value:function(t,e){this._childNodes[t]=e}},{key:"getChildNodes",value:function(){return this._childNodes}},{key:"removeChildNode",value:function(t){delete this._childNodes[t]}},{key:"_destroy",value:function(){var t=this;Object.keys(this._childNodes).forEach((function(e){return t._childNodes[e]._destroy()})),this.root.identifierCache.removeNodeToCache(this),this.root.referenceCache.updateRefs(this.identifier),J(G(f.prototype),"_destroy",this).call(this)}},{key:"snapshot",get:function(){return this.vm.snapshot}}])&&z(r.prototype,o),f}(p);function K(t,e,n,r,o){return new m(t,e,n,r,o)}function Q(t){return(Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function W(t,e,n){return(W="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=et(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function X(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Y(t,e)}function Y(t,e){return(Y=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Z(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=et(t);if(e){var o=et(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return tt(this,n)}}function tt(t,e){return!e||"object"!==Q(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function et(t){return(et=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function nt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function rt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ot(t,e,n){return e&&rt(t.prototype,e),n&&rt(t,n),t}var it=["is","instantiate","createNewInstance"],ut=function(){function t(){var e,r,o=this;nt(this,t),r=void 0,(e="identifierAttribute")in this?Object.defineProperty(this,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):this[e]=r,it.forEach((function(t){if("function"!=typeof o[t])throw n('BaseType must realize "'.concat(t,'" methods'))}))}return ot(t,[{key:"create",value:function(t,e){return this.instantiate(null,"",t,e).value}},{key:"isAssignableFrom",value:function(t){return t===this}}]),t}(),ct=function(t){X(n,t);var e=Z(n);function n(){return nt(this,n),e.call(this)}return ot(n,[{key:"create",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getDefaultSnapshot(),e=arguments.length>1?arguments[1]:void 0;return W(et(n.prototype),"create",this).call(this,t,e)}},{key:"instantiate",value:function(t,e,n,r){return function(t,e,n,r,o){return new H(t,e,n,r,o)}(this,t,e,n,r)}},{key:"getDefaultSnapshot",value:function(){return{}}},{key:"getValue",value:function(t){return t.storedValue}},{key:"getSnapshot",value:function(t){return JSON.parse(JSON.stringify(t.storedValue))}}]),n}(ut),at=function(t){X(n,t);var e=Z(n);function n(){return nt(this,n),e.apply(this,arguments)}return ot(n,[{key:"createNewInstance",value:function(t){return t}},{key:"instantiate",value:function(t,e,n,r){return K(this,t,e,n,r)}},{key:"getDefaultSnapshot",value:function(){}},{key:"getValue",value:function(t){return t.storedValue}},{key:"getSnapshot",value:function(t){return t.storedValue}}]),n}(ut),ft=function(t){return t},lt={enumerable:!0,configurable:!0,get:null,set:null};function st(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var pt=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var e=this;e._dormancy=!0,e.data={},e._each=e._each.bind(e),e._each((function(t,n,r,o){!function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:ft;lt.get=function(){return e[n]},lt.set=function(t){e[n]=r(t)},Object.defineProperty(t,n,lt)}(e.data,n,t,o?function(n){if(!e._dormancy){if(k(n)){var o=n[a];return delete n[a],o}return e._createChildNode(r,t,n).value}}:ft),e.data[t]=void 0}))}var e,n;return e=t,(n=[{key:"_createChildNode",value:function(t,e,n){var r=_(this.$vm),o=t.instantiate(r,"".concat(r.subpath,"/").concat(e),n);return r.replaceChildNode(e,o),o}},{key:"_each",value:function(t){var e=this._dataTypes||N(this.constructor.prototype);for(var n in e)if(!1===function(r){return t(n,e,r,r instanceof ut,!1)}.call(this,e[n]))break}},{key:"_calculateInitializeData",value:function(t,e){var n=this,r={};return t=t||{},n._each((function(o,i,u,c,a){if(r[o]=o in t?t[o]:c?u.getDefaultSnapshot():u,e){var f=!0===e;a?(f||"computed"===e)&&(n.$vm[o]=r[o]):(f||"data"===e)&&(n.data[o]=r[o])}})),r}}])&&st(e.prototype,n),t}();function yt(t){return(yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ht(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function bt(t,e){return(bt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function dt(t,e){return!e||"object"!==yt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function vt(t){return(vt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var mt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&bt(t,e)}(c,t);var e,r,o,i,u=(o=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=vt(o);if(i){var n=vt(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return dt(this,t)});function c(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),(e=u.call(this)).validType=t,e}return e=c,(r=[{key:"createNewInstance",value:function(t){if(this.is(t))return t;throw n("value `".concat(t,"` is not assignable to type: `").concat(this.validType,"`"))}},{key:"is",value:function(t){return this.validType===yt(t)}}])&&ht(e.prototype,r),c}(at);function gt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ot(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function wt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _t(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&jt(t,e)}function jt(t,e){return(jt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function St(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Rt(t);if(e){var o=Rt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Pt(this,n)}}function Pt(t,e){return!e||"object"!==kt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Rt(t){return(Rt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function kt(t){return(kt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var Ct=function(t,e){return e},At={methods:{$assign:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ct;if(t&&"object"===kt(t))for(var n in t)n in this.$data&&(this[n]=e(n,t[n]))}}};function Tt(t){var e,n=function(t){_t(n,t);var e=St(n);function n(){return wt(this,n),e.apply(this,arguments)}return n}(pt);return Object.assign(n.prototype,t,{mixins:[At].concat((e=t.mixins||[],function(t){if(Array.isArray(t))return Ot(t)}(e)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(e)||function(t,e){if(t){if("string"==typeof t)return Ot(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ot(t,e):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()))}),n}var Nt=function(t){_t(o,t);var e,n,r=St(o);function o(t){var e;return wt(this,o),(e=r.call(this))._model_=Tt(t),e}return e=o,(n=[{key:"createNewInstance",value:function(t,e){var n,r=this,o=new r._model_;o.mixins=[{beforeCreate:function(){o.$vm=this,this.__model__=r._model_,e&&e(this),o._each((function(t,e,n){if(n instanceof mt)return r.identifierAttribute=t,!1}));try{o._dormancy=!1,o._calculateInitializeData(t||{},"data")}catch(t){n=t}},created:function(){this._beforeCreateData&&this.$assign(this._beforeCreateData)}}].concat(o.mixins);var i=new(c())(o);if(n)throw n;return i}},{key:"getSnapshot",value:function(t){return T(t.storedValue)}},{key:"is",value:function(t){if(t.__model__)return t.__model__===this._model_;try{return this.create(t),!0}catch(t){return!1}}}])&&gt(e.prototype,n),o}(ct);function Et(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function It(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Et(Object(n),!0).forEach((function(e){xt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Et(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function xt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Vt=function(){return Object.assign({mixins:t(arguments).map((function(t){return It(It({},t._model_.prototype),{},{mixins:t._model_.prototype.mixins.filter((function(t){return t!==At}))})}))})};function Mt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Dt(t,e,n){return(Dt=Bt()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var o=new(Function.bind.apply(t,r));return n&&$t(o,n.prototype),o}).apply(null,arguments)}function Bt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function $t(t,e){return($t=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ft=Array.prototype.slice,zt=function(t){return t?Ft.call(t):t},Jt={_overwriteParams:function(t){return t},push:function(){var t=this,e=arguments;return this._willChange&&this._willChange("push",e),this.__proto__.push.apply(this,zt(arguments).map((function(n,r){return t._overwriteParams(n,r,"push",e)})))},splice:function(t,e){for(var n=this,r=arguments.length,o=new Array(r>2?r-2:0),i=2;i<r;i++)o[i-2]=arguments[i];var u=arguments;return this._willChange&&this._willChange("splice",u),this.__proto__.splice.apply(this,[t,arguments.length>=2?e:1/0].concat(zt(o).map((function(t,e){return n._overwriteParams(t,e,"splice",u)}))))}};function Lt(){var t=Dt(Array,Array.prototype.slice.call(arguments));for(var e in Object.setPrototypeOf(t,Lt.prototype),Jt)t[e]=Jt[e];return t}Object.setPrototypeOf(Lt.prototype,Array.prototype),Lt.clone=function(t,e){var n=new Lt;return e&&(n._overwriteParams=e._overwriteParams,n._willChange=e._willChange,e.created&&e.created.call(n)),n.push.apply(n,function(t){return function(t){if(Array.isArray(t))return Mt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return Mt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Mt(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(Array.prototype.slice.call(t))),n};var Ut=Lt;function qt(t){return(qt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Gt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Ht(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Kt(t,e){return(Kt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Qt(t,e){return!e||"object"!==qt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Wt(t){return(Wt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Xt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Kt(t,e)}(c,t);var e,r,o,i,u=(o=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Wt(o);if(i){var n=Wt(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return Qt(this,t)});function c(t){var e;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),e=u.call(this),!t)throw n("expected type as argument 1, got ".concat(t," instead"));return e._subType=t,e}return e=c,(r=[{key:"createNewInstance",value:function(t,e){var n=this._subType;return Ut.clone(t,{created:function(){e&&e(this)},_willChange:function(t,e){var n=_(this),r=this.length;switch(t){case"splice":!function(){var t,o=function(t){if(Array.isArray(t))return t}(t=e)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return Gt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Gt(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),i=o[0],u=o[1],c=o.slice(2),a=0,f=c.length;if("number"==typeof i){for(var l=(u="number"==typeof u?u:1/0)-1;l>=0;l--){if(i+l>r)return;a++,!(c.length>=l+1&&k(c[l]))&&(n.getChildNodes()[i+l]._destroy(n),n.removeChildNode(i+l))}for(var s={},p=r-i-a;p>0;p--){var y=i+a+p-1,h=i+f-1+p;y!==h&&(s[h]=n.getChildNodes()[y],n.removeChildNode(y))}Object.keys(s).forEach((function(t){return n.replaceChildNode(t,s[t])}))}}()}},_overwriteParams:function(t,e,r,o){var i=_(this),u=this.length;switch(r){case"splice":e+=o[0]||0;break;default:e+=u}if(k(t)){var c=t[a];return delete t[a],c}var f=n.instantiate(i,"".concat(i.subpath,"/").concat(e),t);return i.replaceChildNode(e,f),f.value}})}},{key:"getSnapshot",value:function(t){var e=t.getChildNodes();return t.storedValue.map((function(t,n){var r=e[n];return w(r)?r.snapshot:A(t)}))}},{key:"is",value:function(t){return t instanceof Ut&&!!t._overwriteParams}}])&&Ht(e.prototype,r),c}(ct);function Yt(t){return(Yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Zt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function te(t,e){return(te=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ee(t,e){return!e||"object"!==Yt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ne(t){return(ne=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var re=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&te(t,e)}(c,t);var e,r,o,i,u=(o=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=ne(o);if(i){var n=ne(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return ee(this,t)});function c(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),(e=u.call(this)).literal=t,e}return e=c,(r=[{key:"createNewInstance",value:function(t){if(this.is(t))return this.literal;throw n("value `".concat(t,"` is not assignable to type: `").concat(this.literal,"`"))}},{key:"is",value:function(t){return this.literal===t}}])&&Zt(e.prototype,r),c}(at);function oe(t){return(oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ie(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ue(t,e){return(ue=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ce(t,e){return!e||"object"!==oe(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ae(t){return(ae=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var fe=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ue(t,e)}(c,t);var e,r,o,i,u=(o=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=ae(o);if(i){var n=ae(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return ce(this,t)});function c(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),(e=u.call(this))._types=t,e}return e=c,(r=[{key:"isAssignableFrom",value:function(t){return this._types.some((function(e){return e.isAssignableFrom(t)}))}},{key:"createNewInstance",value:function(t){for(var e=this._types,r=0;r<e.length;r++)try{return e[r].create(t)}catch(t){}throw n("Union could not determine the type")}},{key:"getSnapshot",value:function(t){return t.type.getSnapshot(t)}},{key:"is",value:function(t){for(var e=this._types,n=0;n<e.length;n++)if(e[n].is(t))return!0;return!1}}])&&ie(e.prototype,r),c}(ct);function le(t){return(le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function se(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function pe(t,e){return(pe=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ye(t,e){return!e||"object"!==le(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function he(t){return(he=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var be=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&pe(t,e)}(c,t);var e,r,o,i,u=(o=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=he(o);if(i){var n=he(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return ye(this,t)});function c(t,e){var r;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),r=u.call(this),void 0===e)throw n("expected type or literal as argument 1, vue component options as argument 2, but only one was received.");r._model_=Tt(Object.assign({},e,{data:function(){return{value:t}}}));var o=t instanceof ut,i=le(t),a=r._model_.prototype._calculateInitializeData;return r._model_.prototype._calculateInitializeData=function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),u=1;u<n;u++)r[u-1]=arguments[u];return a.call.apply(a,[this,{value:o?t.is(e)?e:t.create(e,this):le(e)===le(t)||"undefined"===i||null===t?e:t}].concat(r))},r}return e=c,(r=[{key:"createNewInstance",value:function(){return Nt.prototype.createNewInstance.apply(this,arguments)}},{key:"getSnapshot",value:function(t){return A(t.storedValue.value)}},{key:"is",value:function(t){return Nt.prototype.is.call(this,t)}}])&&se(e.prototype,r),c}(ct);function de(t){return(de="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ve(t,e){return(ve=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function me(t,e){return!e||"object"!==de(e)&&"function"!=typeof e?ge(t):e}function ge(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Oe(t){return(Oe=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function we(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function je(t,e,n){return e&&_e(t.prototype,e),n&&_e(t,n),t}function Se(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Pe=function(){function t(e,r){if(we(this,t),Se(this,"identifier",void 0),Se(this,"resolvedReference",void 0),this.targetType=r,function(t){return"string"==typeof t||"number"==typeof t}(e))this.identifier=e;else if(O(e)){var o=_(e);if(!o.identifierAttribute)throw n("Can only store references with a defined identifier attribute.");var u=o.unnormalizedIdentifier;null==u&&i(n("Can only store references to tree nodes with a defined identifier.")),this.identifier=u}else i(n("Can only store references to tree nodes or identifiers, got: '".concat((c=e,JSON.stringify(C(c)?T(c):c)),"'")));var c}return je(t,[{key:"updateResolvedReference",value:function(t){var n=e(this.identifier),r=t.root,o=r.identifierCache.getLastCacheModificationPerId(n);if(!this.resolvedReference||this.resolvedReference.lastCacheModification!==o){var i=this.targetType,u=r.identifierCache.resolve(i,n);u||(u={}),this.resolvedReference={node:u,lastCacheModification:o}}}}]),t}(),Re=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ve(t,e)}(o,t);var e,n,r=(e=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=Oe(e);if(n){var o=Oe(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return me(this,t)});function o(t){var e;return we(this,o),Se(ge(e=r.call(this)),"targetType",void 0),e.targetType=t,e}return je(o,[{key:"isAssignableFrom",value:function(t){return this.targetType.isAssignableFrom(t)}},{key:"instantiate",value:function(t,e,n,r){var o,i=O(n)?j(n):w(n)?n.identifier:n,u=function(t,e,n){var r=new Pe(t,e),o=new(c())({data:{isMounted:!1},computed:{ref:function(){return r},resolvedValue:function(){if(this.isMounted){r.updateResolvedReference(this.node);var t=r.resolvedReference.node.value;return n&&n(t),t}}},watch:{resolvedValue:function(){}}});return o.node=null,o}(i,this.targetType,(function(n){var r=e.match(/([^/]+)$/)[0],i=t.storedValue;o!==n&&(o=n,i[r]!==n&&(n?n[a]=n:(f[a]=n,n=f),r in i?i instanceof Array?i.splice(+r,1,n):i[r]=n:(i._beforeCreateData=i._beforeCreateData||{},i._beforeCreateData[r]=n)))})),f=K(this,t,e,u,r);return f.identifier=i,u.node=f,u.isMounted=!0,this.watchTargetNodeForInvalidations(f,i,t),f}},{key:"watchTargetNodeForInvalidations",value:function(t,e,n){t.root.referenceCache.addRef(t,e);var r=t._destroy;t._destroy=function(){r.apply(this,arguments),n.root.referenceCache.removeRefs(this,e)}}},{key:"getValue",value:function(t){if(t.isAlive)return t.storedValue.resolvedValue}},{key:"getSnapshot",value:function(t){return t.storedValue.ref.identifier}},{key:"is",value:function(){}}]),o}(at),ke={vue:function(t){return new Nt(t)},vo:function(t,e){return new be(t,e)},array:function(t){return new Xt(t)},literal:function(t){return new re(t)},union:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return new fe(e)},compose:function(){return ke.vue(Vt.apply(void 0,arguments))},composeVo:function(){return ke.vo(void 0,Vt.apply(void 0,arguments))},identifier:new mt("string"),identifierNumber:new mt("number"),reference:function(t){return new Re(t)}}}(),o}()}));